<templates>
  <script id="view.card" type="text/ng-template">
    <div id="katrid-action-view" class="data-form">
      <ng-include src="'view.toolbar'"></ng-include>
      <div class="content-scroll">
        <div class="content no-padding">
          <div class="data-panel col-12">

              <div class="card-view kanban" ng-if="groupings.length" card-draggable=".card-group" card-group>

                <div ng-repeat="group in groupings" class="card-group sortable-item" data-id="{{group._paramValue}}" data-group-name="{{group._paramName}}">
                  <div class="card-header margin-bottom-8">
                    <div class="pull-right">
                      <button class="btn" ng-click="cardShowAddGroupItemDlg = true"><i class="fa fa-plus"></i></button>
                    </div>
                    <h4 ng-bind="group.__str__"></h4>
                    <div class="clearfix"></div>

                    <form id="card-add-group-item-dlg" ng-submit="cardAddItem($event, cardNewName)" ng-if="cardShowAddGroupItemDlg">
                      <div class="form-group">
                        <input ng-model="cardNewName" ng-init="cardNewName = ''" class="form-control" ng-esc="cardHideAddGroupItemDlg($event)" placeholder="{{ ::gettext('Add') }}" ng-blur="cardHideAddGroupItemDlg($event)">
                      </div>
                      <button type="submit" class="btn btn-primary" onmousedown="event.preventDefault();event.stopPropagation();">${Katrid.i18n.gettext('Add')}</button>
                      <button class="btn btn-default">{{ ::gettext('Cancel') }}</button>
                    </form>

                  </div>
                  <div class="card-items" card-draggable=".card-items" card-item>
                    <div ng-repeat="record in group.records" class="card-item sortable-item ui-sortable-handle" ng-click="action.listRowClick($index, record, $event)">
                      %(content)s
                    </div>
                  </div>
                </div>

                <div class="card-add-group" title="{{ ::gettext('Click here to add new column') }}" ng-click="cardNewName='';cardShowAddGroupDlg($event);" data-group-name="{{groupings[0]._paramName}}">
                  <div ng-hide="cardAddGroupDlg">
                    <i class="fa fa-fw fa-chevron-right fa-2x"></i>
                    <div class="clearfix"></div>
                    <span class="title">{{ ::gettext('Add New Column') }}</span>
                  </div>
                  <form ng-show="cardAddGroupDlg" ng-submit="cardAddGroup($event, cardNewName)">
                  <div class="form-group">
                    <input class="form-control" ng-blur="cardAddGroupDlg=false" ng-esc="cardAddGroupDlg=false" placeholder="{{ ::gettext('Add') }}" ng-model="cardNewName">
                  </div>
                    <button type="submit" class="btn btn-primary">{{ ::gettext('Add') }}</button>
                    <button type="button" class="btn btn-default">{{ ::gettext('Cancel') }}</button>
                  </form>
                </div>
              </div>
              <div class="card-view card-deck" ng-if="!groupings.length">
                <div ng-repeat="record in records" class="card panel-default card-item card-link" ng-click="action.listRowClick($index, record, $event)">
                %(content)s
                </div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
                <div class="card-item card-ghost"></div>
              </div>

            </div>
          </div>
      </div>
    </div>
  </script>
</templates>

<templates>
  <script id="client.ChangePassword" type="text/ng-template">
    <div class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <form change-password-view class="modal-content" ng-submit="submit(oldPassword, newPassword, confirmPassword)">
          <div class="modal-header">
            <div class="modal-title">
              <h5>
                {{ ::_.gettext('Change Password') }}
              </h5>
            </div>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times</span>
            </button>
          </div>
          <div class="modal-body">
            <table class="table table-no-border">
              <tr>
                <td>
                  <label for="id-old-password">{{ ::_.gettext('Old Password') }}</label>
                </td>
                <td>
                  <input id="id-old-password" type="password" class="form-control" ng-model="oldPassword" autofocus required/>
                </td>
              </tr>
              <tr>
                <td>
                  <label for="id-new-password">{{ ::_.gettext('New Password') }}</label>
                </td>
                <td>
                  <input id="id-new-password" type="password" class="form-control" ng-model="newPassword" required/>
                </td>
              </tr>
              <tr>
                <td>
                  <label for="id-confirm-password">{{ ::_.gettext('Confirm New Password') }}</label>
                </td>
                <td>
                  <input id="id-confirm-password" type="password" class="form-control" ng-model="confirmPassword" required/>
                </td>
              </tr>
            </table>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" type="submit">{{ ::_.gettext('Change Password') }}</button>
            <button class="btn btn-secondary" type="button" data-dismiss="modal">{{ ::_.gettext('Cancel') }}</button>
          </div>
        </form>
      </div>
    </div>
  </script>
</templates>
<templates>
  <script id="view.dashboard" type="text/ng-template">
    <dashboard class="dashboard" data-dashboard-id="{{ action.info.id }}">
    </dashboard>
  </script>
</templates>
<templates>
  <script id="dialog.base" type="text/ng-template">
    <div class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              {{ title }}
              {{ action.info.display_name }}
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="modal-dialog-body" ng-class="{'form-data-changing': dataSource.changing}">
              %(content)s
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="modal-footer">
          </div>
        </div>
      </div>
    </div>
  </script>
  <script id="dialog.window" extends="dialog.base" type="text/ng-template">
    <jquery selector="div.modal-footer" operation="append">
      <button type="button" class="btn btn-primary" type="button" ng-click="saveAndClose()"
              ng-show="dataSource.changing">{{ ::gettext('Save') }}
      </button>
      <button type="button" class="btn btn-default" type="button" data-dismiss="modal"
              ng-show="dataSource.changing">{{ ::gettext('Cancel') }}
      </button>
      <button type="button" class="btn btn-default" type="button" data-dismiss="modal"
              ng-show="!dataSource.changing">{{ :: gettext('Close') }}
      </button>
    </jquery>
  </script>
</templates>
<templates>
  <script id="view.field.StatusField" type="text/ng-template">
    <div class="status-field status-field-sm pull-right">
      <input type="hidden" ng-model="self.%(fieldName)s"/>
      <div class="steps">
        <a ng-class="{active: $parent.$parent.self.%(fieldName)s === item[0]}" ng-repeat="item in choices">
          <span ng-bind="item[1]"/>
        </a>
      </div>
    </div>
  </script>
  <script id="view.field.OneToManyField.Dialog" type="text/ng-template">
    <div class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg" role="document" ng-class="{'form-data-changing': dataSource.changing, 'form-data-readonly': !dataSource.changing}">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel">{{ field.caption }}</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
    <!-- view content -->
            <div class="clearfix"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" type="button" ng-click="save()" ng-show="dataSource.changing">
              {{ ::_.gettext('Save') }}
            </button>
            <button type="button" class="btn btn-default" type="button" data-dismiss="modal" ng-show="dataSource.changing">
              {{ ::_.gettext('Cancel') }}
            </button>
            <button type="button" class="btn btn-default" type="button" data-dismiss="modal" ng-show="!dataSource.changing">
              {{ ::_.gettext('Close') }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script id="view.field.SortableField" type="text/ng-template">
    <div class="sortable-field">
      <input type="hidden" ng-model="self.%(fieldName)s"/>
      <i class="fa fa-arrows"></i>
    </div>
  </script>
</templates>
<templates>
  <script id="view.form" type="text/ng-template">
    <div ng-form="form" class="form-view data-form"
         ng-class="{'form-data-changing': dataSource.changing, 'form-data-readonly': !dataSource.changing}"
    >
      <toolbar>
        <div>
          <a href="#" onclick="event.preventDefault()" title="Add to favorite"><i class="fa star fa-star-o pull-right"></i></a>
          <!-- replace-breadcrumbs -->
          <p class="help-block">{{ ::action.info.usage }}</p>
        </div>
        <div class="toolbar">
          <button class="btn btn-primary" type="button" ng-disabled="dataSource.uploading"
                  ng-click="dataSource.save()" ng-show="dataSource.changing">
            {{ ::_.gettext('Save') }}
          </button>
          <button class="btn btn-primary" type="button" ng-disabled="dataSource.uploading"
                  ng-click="dataSource.edit()" ng-show="!dataSource.changing">
            {{ ::_.gettext('Edit') }}
          </button>
          <button class="btn btn-secondary" type="button" ng-disabled="dataSource.uploading"
                  ng-click="dataSource.insert()" ng-show="!dataSource.changing">
            {{ ::_.gettext('Create') }}
          </button>
          <button class="btn btn-secondary" type="button" ng-click="dataSource.cancel()"
                  ng-show="dataSource.changing">
            {{ ::_.gettext('Cancel') }}
          </button>


          <div class="btn-group">
            <div class="dropdown">
              <button id="attachments-button" attachments-button="" type="button" class="btn btn-secondary dropdown-toggle"
                      data-toggle="dropdown" aria-haspopup="true">
                <span ng-if="!attachments.length">{{ ::_.gettext('Attachments') }} </span>
                  <span ng-if="attachments.length">{{ ::_.sprintf(_.gettext('%%d Attachment(s)'), attachments.length) }}</span>
                <span class="caret"></span>
              </button>
              <div class="dropdown-menu attachments-menu">
                <a class="dropdown-item position-relative" ng-repeat="attachment in attachments" href="{{ ::attachment.download_url }}">
                  {{ ::attachment.name }} <span
                      class="fa fa-trash-o remove-attachment-button" title="{{ ::_.gettext('Delete attachment') }}"
                      ng-click="$event.preventDefault();action.deleteAttachment(attachments, $index);$event.stopPropagation();"></span>
                </a>
                <div role="separator" class="dropdown-divider" ng-show="attachments.length"></div>
                <a class="dropdown-item" href="javascript:void(0)" onclick="$(this).next().click()">
                  {{ ::_.gettext('Add...') }}
                </a>
                <input type="file" class="input-file-hidden" multiple="multiple"
                       onchange="Katrid.Services.Attachments.upload(this)"/>
              </div>
            </div>
          </div>
          <div class="btn-group">
            <div class="dropdown">
              <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown"
                      aria-haspopup="true">
                {{ ::_.gettext('Action') }} <span class="caret"></span>
              </button>
              <div class="dropdown-menu dropdown-menu-actions">
                <a class="dropdown-item" ng-click="action.deleteSelection(true)">
                  <i class="fa fa-fw fa-trash-o"></i> {{ ::_.gettext('Delete') }}
                </a>
                <a class="dropdown-item" ng-click="action.copy()">
                  <i class="fa fa-fw fa-files-o"></i>
                  {{ ::_.gettext('Duplicate') }}
                </a>
                <a class="dropdown-item" ng-if="$parent.record.id" ng-repeat="opt in ::copyToOpts" ng-click="action.copyTo(opt.id)">
                  <i class="fa fa-fw fa-files-o"></i>
                  {{ ::_.sprintf(_.gettext('Copy To %s'), opt.name) }}
                </a>
                <!-- replace-actions -->
              </div>
            </div>
          </div>

          <div class="pull-right">
            <div class="btn-group pagination-area">
              <span ng-show="records.length">
                {{ dataSource.recordIndex + 1 }} / {{ records.length }}
              </span>
            </div>
            <div class="btn-group" role="group">
              <button class="btn btn-secondary" type="button" ng-click="dataSource.prior('form')">
                <i class="fa fa-chevron-left"></i>
              </button>
              <button class="btn btn-secondary" type="button" ng-click="dataSource.next('form')">
                <i class="fa fa-chevron-right"></i>
              </button>
            </div>
          </div>
          <replace id="buttons"></replace>
        </div>
      </toolbar>

      <div class="content-scroll">
        <div class="content">
          <div class="clearfix"></div>
          <header class="content-container-heading">
            <div class="header-buttons">
            <!-- replace-header -->
            </div>
          </header>
          <div class="clearfix"></div>
          <div class="content container">
            <div class="card panel-default data-panel browsing"
                 ng-class="{ browsing: dataSource.browsing, editing: dataSource.changing }">
              <div class="card-body teste">
                  <a class="maximize-button" role="button" title="Maximizar" onclick="$(this).closest('div.card.data-panel').toggleClass('box-fullscreen');$(this).find('i').toggleClass('fa-compress fa-expand')">
                    <i class=" fa fa-expand"></i>
                  </a>
                  <!-- replace-content -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script id="view.form.dialog" type="text/ng-template">
    <form novalidate>
      <!-- replace-content -->
    </form>
  </script>
  <script id="view.form.dialog.modal" type="text/ng-template">
    <div class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg form-view form-data-changing" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="myModalLabel">
              {{::dialogTitle}}
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body data-form data-panel">
              <!-- view content -->
            <div class="clearfix"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" type="button" ng-click="dataSource.saveAndClose()" ng-show="dataSource.changing">
              {{::_.gettext('Save')}}
            </button>
            <button type="button" class="btn btn-secondary" type="button" data-dismiss="modal" ng-show="dataSource.changing">
              {{::_.gettext('Cancel')}}
            </button>
            <button type="button" class="btn btn-secondary" type="button" data-dismiss="modal" ng-show="!dataSource.changing">
              {{::_.gettext('Close')}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </script>
</templates>

<templates>
  <script id="view.import" type="text/ng-template">
    <div>
      <toolbar>
        teste
      </toolbar>
      <form>
        bla bla bla
      </form>
    </div>
  </script>
  <script extends="view.buttons" type="text/ng-template">
    <jquery operation="append">
      <button class="btn btn-default btn-import-data" ng-click="action.doAction({ type: 'ir.action.client', tag: 'import' })">
        {{ ::gettext('Import') }}
      </button>
    </jquery>
  </script>
</templates>
<templates>
  <script id="view.list" type="text/ng-template">
    <div id="katrid-action-view" class="list-view">
      <ng-include src="'view.toolbar'"></ng-include>
      <div class="content-scroll">
        <div class="content no-padding">
          <div class="panel-default data-panel">
            <div class="panel-body no-padding">
              <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                %(content)s
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script id="view.list.th.group" type="text/ng-template">
    <th ng-show="dataSource.groups.length"></th>
  </script>
  <script id="view.list.td.group" type="text/ng-template">
    <td ng-show="dataSource.groups.length" class="group-header">
      <div ng-show="row._group">
        <span class="fa fa-fw fa-caret-right"
              ng-class="{'fa-caret-down': row._group.expanded, 'fa-caret-right': row._group.collapsed}"></span>
        {{::row._group.__str__}} ({{::row._group.count }})
      </div>
    </td>
  </script>
  <script id="view.list.th.selector" type="text/ng-template">
    <th class="list-record-selector">
      <input type="checkbox" ng-click="action.selectToggle($event.currentTarget)"
             onclick="$(this).closest('table').find('td.list-record-selector input').prop('checked', $(this).prop('checked'))">
    </th>
  </script>
  <script id="view.list.td.selector" type="text/ng-template">
    <td class="list-record-selector" onclick="event.stopPropagation();">
      <input data-id="{{ ::record.id }}" type="checkbox" ng-click="action.selectToggle($event.currentTarget)"
             onclick="if (!$(this).prop('checked')) $(this).closest('table').find('th.list-record-selector input').prop('checked', false)">
    </td>
  </script>
</templates>

<templates>
  <script id="view.param.String" type="text/ng-template">
    <div class="form-group">
      <input class="form-control" placeholder="{{ ::_.gettext('') }}" ng-model="searchValue" ng-change="valueChange(searchValue)">
    </div>
  </script>
  <script id="view.param.String.conditions" type="text/ng-template">
    <select class="form-control" ng-model="condition" ng-change="conditionChange(condition)">
      <option value="like">{{ ::_.gettext('Contains') }}</option>
      <option value="not like">{{ ::_.gettext('Not contains') }}</option>
      <option value="=">{{ ::_.gettext('Is equal') }}</option>
      <option value="!=">{{ ::_.gettext('Is different') }}</option>
      <option value="is not null">{{ ::_.gettext('Is defined') }}</option>
      <option value="is null">{{ ::_.gettext('Is not defined') }}</option>
    </select>
  </script>
  <script id="view.param.Integer" type="text/ng-template">
    <div class="form-group">
      <input class="form-control" type="number" step="1" placeholder="{{ ::_.gettext('Field Value') }}" ng-model="searchValue" ng-change="valueChange(searchValue)">
    </div>
  </script>
  <script id="view.param.Boolean" type="text/ng-template">
    <select class="form-control text-capitalize" ng-model="searchValue" ng-change="valueChange(searchValue)">
      <option value="true">{{ ::_.gettext('yes') }}</option>
      <option value="false">{{ ::_.gettext('no') }}</option>
    </select>
  </script>
  <script id="view.param.Boolean.conditions" type="text/ng-template"></script>
  <script id="view.param.Date" type="text/ng-template">
    <div class="form-group">
      <input class="form-control" date-input type="date" ng-model="searchValue" ng-change="valueChange(searchValue)">
    </div>
  </script>
  <script id="view.param.Date.conditions" type="text/ng-template">
    <select class="form-control" ng-model="condition" ng-change="conditionChange(condition)">
      <option value="=">{{ ::_.gettext('Is equal') }}</option>
      <option value="!=">{{ ::_.gettext('Is different') }}</option>
    </select>
  </script>
  <script id="view.param.DateTime" type="text/ng-template">
    <div class="form-group">
      <input class="form-control" date-input type="date" ng-model="searchValue" ng-change="valueChange(searchValue)">
    </div>
  </script>
  <script id="view.param.DateTime.conditions" type="text/ng-template">
    <select class="form-control" ng-model="condition" ng-change="conditionChange(condition)">
      <option value="=">{{ ::_.gettext('Is equal') }}</option>
      <option value="!=">{{ ::_.gettext('Is different') }}</option>
      <option value=">">{{ ::_.gettext('Greater-than') }}</option>
      <option value="<">{{ ::_.gettext('Less-than') }}</option>
    </select>
  </script>
</templates>
<templates>
  <script id="view.report" type="text/ng-template">
    <div ng-controller="ReportController">
      <form id="report-form" method="get" action="/web/reports/report/">
        <div class="data-heading panel panel-default">
          <div class="panel-body">
          <h2>{{ report.name }}</h2>
          <div class="toolbar">
            <button class="btn btn-primary" type="button" ng-click="report.preview()"><span class="fa fa-print fa-fw"></span> {{ ::_.gettext('Preview') }}</button>

            <div class="btn-group">
              <button class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                      aria-expanded="false">{{ ::_.gettext('Export') }} <span class="caret"></span></button>
              <div class="dropdown-menu">
                <a class="dropdown-item" ng-click="Katrid.Reports.Reports.preview()">PDF</a>
                <a class="dropdown-item" href="#" ng-click="$event.preventDefault();Katrid.Reports.Telegram.export(report)">Telegram</a>
                <a class="dropdown-item" href="javascript:void(0)" ng-click="Katrid.Reports.Reports.export('docx')">Word</a>
                <a class="dropdown-item" href="javascript:void(0)" ng-click="Katrid.Reports.Reports.export('xlsx')">Excel</a>
                <a class="dropdown-item" href="javascript:void(0)" ng-click="Katrid.Reports.Reports.export('pptx')">PowerPoint</a>
                <a class="dropdown-item" href="javascript:void(0)" ng-click="Katrid.Reports.Reports.export('csv')">CSV</a>
                <a class="dropdown-item" href="javascript:void(0)" ng-click="Katrid.Reports.Reports.export('txt')">{{ ::_.gettext('Text File') }}</a>
              </div>
            </div>

            <div class="btn-group">
              <button class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                      aria-expanded="false">{{ ::_.gettext('My reports') }} <span class="caret"></span></button>
              <ul class="dropdown-menu">
              </ul>
            </div>

          <div class="pull-right btn-group">
            <button class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false"><i class="fa fa-gear fa-fw"></i></button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="javascript:void(0)" ng-click="report.saveDialog()">{{ ::_.gettext('Save') }}</a>
              <a class="dropdown-item" href="#">{{ ::_.gettext('Load') }}</a>
              <div class="dropdown-divider"></div>
              <h6 class="dropdown-header">Report Viewer</h6>
              <a class="dropdown-item" href="javascript:localStorage.setItem('katridReportViewer', 'pdf')">Visualizar em PDF</a>
              <a class="dropdown-item" href="javascript:localStorage.setItem('katridReportViewer', 'native')">Visualizador Nativo</a>
            </div>
          </div>

          </div>
        </div>
        </div>
        <div class="col-sm-12">
          <table class="col-sm-12" style="margin-top: 20px; display:none;">
            <tr>
              <td colspan="2" style="padding-top: 8px;">
                <label>{{ ::_.gettext('My reports') }}</label>

                <select class="form-control" ng-change="action.userReportChanged(action.userReport.id)" ng-model="action.userReport.id">
                    <option value=""></option>
                    <option ng-repeat="rep in userReports" value="{{ rep.id }}">{{ rep.name }}</option>
                </select>
              </td>
            </tr>
          </table>
        </div>
      <div id="report-params">
      <div id="params-fields" class="col-sm-12 form-group" ng-if="::customizableReport">
        <div class="checkbox"><label><input type="checkbox" ng-model="paramsAdvancedOptions"> {{ ::_.gettext('Advanced options') }}</label></div>
        <div ng-show="paramsAdvancedOptions">
          <div class="form-group">
            <label>{{ ::_.gettext('Printable Fields') }}</label>
            <input type="hidden" id="report-id-fields"/>
          </div>
          <div class="form-group">
            <label>{{ ::_.gettext('Totalizing Fields') }}</label>
            <input type="hidden" id="report-id-totals"/>
          </div>
        </div>
      </div>

      <div class="clearfix"></div>

      </div>
        <div ng-if="::advancedOptions">
        <div id="params-sorting" class="col-sm-12 form-group">
          <label class="control-label">{{ ::_.gettext('Sorting') }}</label>
          <select multiple id="report-id-sorting"></select>
        </div>

        <div id="params-grouping" class="col-sm-12 form-group">
          <label class="control-label">{{ ::_.gettext('Grouping') }}</label>
          <select multiple id="report-id-grouping"></select>
        </div>
        <hr>
        <table class="col-sm-12">
          <tr>
            <td class="col-sm-4">
              <select class="form-control" ng-model="newParam">
                <option value="">--- {{ ::_.gettext('FILTERS') }} ---</option>
                <option ng-repeat="field in report.fields" value="{{ field.name }}">{{ field.label }}</option>
              </select>
            </td>
            <td class="col-sm-8">
              <button
                  class="btn btn-outline-secondary" type="button"
                  ng-click="report.addParam(newParam)">
                <i class="fa fa-plus fa-fw"></i> {{ ::_.gettext('Add Parameter') }}
              </button>
            </td>
          </tr>
        </table>
        <div class="clearfix"></div>
        <hr>
      </div>
      <div id="params-params" class="params-params margin-top-8 row">
        <div ng-repeat="param in report.params" ng-controller="ReportParamController" class="col-lg-6 form-group">
          <div class="col-12">
            <label class="control-label">{{ param.label }}</label>
          </div>
          <div class="col-4" ng-if="param.operationsVisible">
            <select ng-model="param.operation" class="form-control" ng-change="param.setOperation(param.operation)">
              <option ng-repeat="op in param.operations" value="{{op.id}}">{{op.text}}</option>
            </select>
          </div>
          <div class="col param-widget"></div>
        </div>
      </div>
      </form>
    </div>
  </script>
</templates>

<templates>
  <script id="view.search" type="text/ng-template">
    <div search-view-area class="search-area">
      <div class="search-view">
        <div class="search-view-facets">
          <div class="facet-view" ng-repeat="facet in search.facets">
            <span class="facet-label" ng-bind-html="facet.caption"></span>
            <span class="facet-value" ng-bind-html="facet.templateValue"></span>
            <span class="fa fa-sm fa-remove facet-remove" ng-click="$parent.search.remove($index)"></span>
          </div>
        </div>
        <input class="search-view-input" role="search" placeholder="{{ ::_.gettext('Search...') }}" ng-model="search.text">
        <span
            ng-class="{'fa-search-plus': !search.viewMoreButtons, 'fa-search-minus': search.viewMoreButtons}"
            class="search-view-more fa" ng-click="search.viewMoreButtons=!search.viewMoreButtons"></span>
      </div>
      <div class="col-sm-12">
        <ul class="search-dropdown-menu search-view-menu" role="menu">
          <li ng-repeat="item in ::search.fields">
            <a ng-if="item.expandable" class="expandable" href="#" onclick="event.preventDefault();" ng-mousedown="item.expanded=!item.expanded;$event.preventDefault();$event.stopPropagation();">
              <i class="fa" ng-class="{'fa-angle-down': item.expanded, 'fa-angle-right': !item.expanded}"></i>
            </a>
            <a href="#" class="search-menu-item" ng-mousedown="$event.preventDefault();$event.stopPropagation();" ng-click="item.select();$event.preventDefault();" ng-bind-html="item.template"></a>
            <a ng-if="item.loading" class="search-menu-item"><i>{{ ::_.gettext('Loading...') }}</i></a>
            <a class="search-menu-item indent" href="#" onclick="event.preventDefault()" ng-mousedown="$parent.item.selectItem(value)" ng-bind="value[1]" ng-repeat="value in item.children"></a>
          </li>
        </ul>
      </div>
    </div>
  </script>

  <script id="view.search.buttons" type="text/ng-template">
    <div class="btn-group search-view-more-area" ng-show="search.viewMoreButtons">
      <div custom-filter class="btn-group">
        <button class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" type="button" aria-expanded="false">
          <span class="fa fa-filter"></span> {{ ::_.gettext('Filters') }} <span class="caret"></span>
        </button>
        <ng-include src="'view.search.menu'"/>
      </div>
      <div class="btn-group">
        <button class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" type="button">
          <span class="fa fa-bars"></span> {{ ::_.gettext('Group By') }} <span class="caret"></span>
        </button>
        <ul class="dropdown-menu search-view-groups-menu"></ul>
      </div>
      <button class="btn btn-secondary">
        <span class="fa fa-star"></span> {{ ::_.gettext('Favorites') }} <span class="caret"></span>
      </button>
    </div>
  </script>

  <script id="view.search.menu" type="text/ng-template">
    <div class="dropdown-menu search-view-filter-menu">
      <div>
        <div ng-repeat="group in search.filterGroups">
          <a class="dropdown-item" ng-class="{'selected': filter.selected}" ng-repeat="filter in group" ng-click="filter.toggle();$event.stopPropagation();">
            {{ filter.toString() }}
          </a>
          <div class="dropdown-divider"></div>
        </div>
      </div>
      <div ng-controller="CustomFilterController">
        <div ng-repeat="filter in customFilter">
          <a class="dropdown-item" ng-class="{'selected': filterItem.selected}" ng-click="filterItem.toggle();$event.stopPropagation();$event.preventDefault();" ng-repeat="filterItem in filter" ng-bind-html="filterItem.toString()"></a>
          <div class="dropdown-divider"></div>
        </div>
        <a class="dropdown-item dropdown-search-item" onclick="event.stopPropagation();event.preventDefault();" ng-click="customSearchExpanded=!customSearchExpanded">
          <i ng-class="{ 'fa-caret-right': !customSearchExpanded, 'fa-caret-down': customSearchExpanded }" class="fa expandable"></i>
          {{ ::_.gettext('Add Custom Filter') }}
        </a>
        <div ng-if="customSearchExpanded" onclick="event.stopPropagation();event.preventDefault();">
          <div ng-show="tempFilter.length" class="margin-bottom-8">
            <a href="#" onclick="$event.preventDefault()" class="dropdown-item" ng-repeat="filter in tempFilter" ng-bind-html="filter.toString()" title="{{ ::_.gettext('Remove item') }}"></a>
          </div>
          <div class="col-12">
            <div class="form-group">
              <select class="form-control" ng-model="fieldName" ng-change="fieldChange(action.fields[fieldName])">
                <option value=""></option>
                <option ng-repeat="field in action.fieldList|orderBy:'caption'" value="{{ field.name }}">{{ field.caption }}</option>
              </select>
            </div>
            <div class="form-group">
              <ng-include src="field.paramTemplate + '.conditions'"/>
            </div>
            <div class="form-group">
              <ng-include src="field.paramTemplate" ng-show="controlVisible"/>
            </div>
            <div class="form-group">
              <button class="btn btn-primary" type="button" ng-click="applyFilter()" ng-show="searchValue!==undefined">
                {{ ::_.gettext('Apply') }}
              </button>
              <button class="btn btn-outline-secondary" type="button" ng-click="addCondition(field, condition, searchValue);fieldName='';" ng-show="searchValue">
                {{ ::_.gettext('Add a condition') }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
</templates>

<templates>
  <script id="view.header" type="text/ng-template">
    <div class="data-heading panel panel-default">
      <div class="panel-body" ng-transclude></div>
    </div>
  </script>
  <script id="view.toolbar" type="text/ng-template">
    <toolbar>
      <div class="row">
        <div class="col-sm-6">
          <ol class="breadcrumb">
            <li>{{ action.info.display_name }}</li>
          </ol>
        </div>
        <search-view class="col-md-6"/>
        <!--<p class="help-block">{{ action.info.usage }}&nbsp;</p>-->
      </div>
      <div class="toolbar row">
        <div class="col-sm-6">

          <ng-include src="'view.buttons'"></ng-include>

          <ng-include src="'view.buttons.reports'"></ng-include>

          <ng-include src="'view.buttons.actions'"></ng-include>

          <!--button class="btn btn-default" ng-click="dataSource.refresh()"><i class="fa fa-refresh"></i> ${ Katrid.i18n.gettext('Refresh') }</button-->

        </div>
        <div class="col-sm-6">

          <ng-include src="'view.search.buttons'"></ng-include>

          <div class="float-right">
            <div class="btn-group pagination-area">
              <span ng-show="action.dataSource.pendingRequest">Carregando...</span>
              <div ng-show="!action.dataSource.pendingRequest">
                <span class="paginator">{{dataSource.offset|number}} - {{dataSource.offsetLimit|number}}</span> /
                <span class="total-pages">{{dataSource.recordCount|number}}</span>
              </div>
            </div>
            <div class="btn-group">
              <button class="btn btn-secondary" type="button" ng-click="dataSource.prevPage()">
                <i class="fa fa-chevron-left"></i>
              </button>
              <button class="btn btn-secondary" type="button" ng-click="dataSource.nextPage()">
                <i class="fa fa-chevron-right"></i>
              </button>
            </div>

            <div class="btn-group">
              <button ng-if="::action.viewModes.includes('card')" class="btn btn-secondary" type="button" ng-click="action.setViewType('card')"><i class="fa fa-th-large"></i></button>
              <button ng-if="::action.viewModes.includes('list')" class="btn btn-secondary" type="button" ng-click="action.setViewType('list')"><i class="fa fa-list"></i></button>
              <button ng-if="::action.viewModes.includes('calendar')" class="btn btn-secondary" type="button" ng-click="action.setViewType('calendar')"><i class="fa fa-calendar"></i></button>
              <button ng-if="::action.viewModes.includes('chart')" class="btn btn-secondary" type="button" ng-click="action.setViewType('chart')"><i class="fa fa-bar-chart-o"></i></button>
            </div>

          </div>
        </div>

      </div>
    </toolbar>
  </script>
  <script id="view.buttons" type="text/ng-template">
    <div class="btn-group">
      <button class="btn btn-primary" type="button" ng-click="action.createNew()">
        {{ ::_.gettext('Create') }}
      </button>
    </div>
  </script>
  <script id="view.buttons.reports" type="text/ng-template">
    <div class="btn-group" ng-show="action.selectionLength">
      <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
        {{ ::_.gettext('Print') }} <span class="caret"></span>
      </button>
      <div class="dropdown-menu">
        <a class="dropdown-item" ng-click="action.autoReport()">
          {{ ::_.gettext('Auto Report') }}
        </a>

        <a ng-repeat="bindingAction in view.toolbar.print" class="dropdown-item" data-id="{{ bindingAction.id }}" ng-click="$parent.action.doBindingAction($event)">
          {{ bindingAction.name }}
        </a>

      </div>
    </div>
  </script>
  <script id="view.buttons.actions" type="text/ng-template">
    <div class="btn-group" ng-show="action.selectionLength">
      <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown"
              aria-haspopup="true">
        {{ ::_.gettext('Action') }} <span class="caret"></span>
      </button>
      <div class="dropdown-menu">
        <a class="dropdown-item" ng-click="action.deleteSelection()">
          <i class="fa fa-fw fa-trash-o"></i> {{ ::_.gettext('Delete') }}
        </a>


      </div>
    </div>
  </script>
</templates>